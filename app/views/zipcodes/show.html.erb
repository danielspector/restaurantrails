<div id="content-below-bar">
  <div class="row">
    <% if current_user == nil || !current_user.zipcodes.include?(@zip) %>
      <div class="medium-6 columns">
        <%= link_to "Add to Watchlist", add_zipcode_show_path(@zip.id), remote: true, class: "button add_zip_watchlist"%>
      </div>
      <div class="medium-6 columns">
          <%= link_to "Remove from Watchlist", remove_zipcode_show_path(@zip.id), remote: true, class: "button remove_zip_watchlist no_display" %>
      </div>
    <% else %>
      <div class="medium-6 columns">
        <%= link_to "Add to Watchlist", add_zipcode_show_path(@zip.id), remote: true, class: "button add_zip_watchlist no_display"%>
      </div>
      <div class="medium-6 columns">
          <%= link_to "Remove from Watchlist", remove_zipcode_show_path(@zip.id), remote: true, class: "button remove_zip_watchlist" %>
      </div>
    <% end %>
    <%= link_to "Zipcode Index", zipcodes_path, :class => "button" %>
  </div>
  <div class="row">
    <div class="alert-box add_zip_show"><p> You have successfully subscribed!</p></div>
    <div class="alert-box remove_zip_show"><p> You have successfully unsubscribed!</p></div>
  </div>
  <div class="medium-2 columns">
    <h3>Find by Name in <%= @zip.zip %></h3>
    <% @restaurants.sort {|a,b| a.name <=> b.name}.each do |r| %>
      <%= link_to r.name, restaurant_path(r), 'data-no-turbolink' => true %><br>
    <% end %>
  </div>
  <div class="medium-10 columns">
    <div>
      <div class="medium-6 columns">
        <h3>Worst Scoring Restaurants in <%= @zip.zip %></h3><br/>
        <% restaurant = @restaurants.first %>
        <%= content_tag :h3, link_to(restaurant.name, restaurant_path(restaurant), 'data-no-turbolink' => true), id: restaurant.name %>
        <%= content_tag :h4, restaurant.phone_num %>
        <%= content_tag :h4, restaurant.address %>
        <% restaurant.cuisines.each do |c| %>
          <%= content_tag :h3, link_to(c.description, cuisine_path(c.id)) %>
        <% end %>
        <h3><%= 
          if restaurant.grade == "A"
            image_tag 'a.jpg', class: "grade"
          elsif restaurant.grade == "B"
            image_tag 'b.jpg', class: "grade"
          elsif restaurant.grade == "C"
            image_tag 'c.jpg', class: "grade"
          else
            image_tag 'pending.jpg', class: "grade"
          end %>
          Violation points: <%= restaurant.score %>
        </h3>
      </div>
      <div class="medium-6 columns">
        <div id="map-canvas"></div>
      </div>
    </div>
    <div class="medium-12 columns">
      <ol>
      <% restaurant.violations.each do |vio| %>
        <%= content_tag :li, link_to(vio.description, violation_path(vio.id)) %>
      <% end %>
      </ol>
      <br>
      <% @restaurants.delete_at(0) %>
      <%= render @restaurants %>
    </div>
  </div>
</div>